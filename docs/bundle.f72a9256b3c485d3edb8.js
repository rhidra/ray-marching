/*! For license information please see bundle.f72a9256b3c485d3edb8.js.LICENSE.txt */
(()=>{var e={477:e=>{e.exports={sourceCode:"#ifdef GL_ES\nprecision mediump float;\n#endif\nattribute vec4 position;void main(){gl_Position=position;}",uniforms:{},consts:{}}},424:e=>{e.exports={sourceCode:"#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 A;uniform float B;uniform vec3 C;uniform vec3 D;const vec3 E=normalize(vec3(1.,1.,.6));\n#define F vec3(135, 206, 235)/255.\n#define G .0174528\n#define H 57.29747\nfloat I(float J,float K,float L){float M=max(L-abs(J-K),0.)/L;return min(J,K)-M*M*M*L*(1./6.);}float N(float J,float K,float L){return I(J,K,-L);}float O(float P,float Q,float L){float M=clamp(0.5-0.5*(Q+P)/L,0.,1.);return mix(P,-Q,M)+L*M*(1.-M);}float R(vec3 J){return max(J.x,max(J.y,J.z));}vec3 S(vec3 T,float J){mat3 U=mat3(1,0,0,0,cos(J),-sin(J),0,sin(J),cos(J));return U*T;}vec3 V(vec3 T,float J){mat3 U=mat3(cos(J),0,sin(J),0,1,0,-sin(J),0,cos(J));return U*T;}vec3 W(vec3 T,float J){mat3 U=mat3(cos(J),-sin(J),0,sin(J),cos(J),0,0,0,1);return U*T;}vec2 X(vec2 T,float J){mat2 U=mat2(cos(J),-sin(J),sin(J),cos(J));return U*T;}float Y(vec2 Z){vec3 a=fract(vec3(Z.xyx)*.1031);a+=dot(a,a.yzx+33.33);return fract((a.x+a.y)*a.z);}float b(vec3 a){a=fract(a*.1031);a+=dot(a,a.zyx+31.32);return fract((a.x+a.y)*a.z);}float c(in vec2 d){return Y(d);}float e(in vec3 d){return b(d);}float f(in vec2 d){vec2 g=floor(d);vec2 h=fract(d);float J=c(g);float K=c(g+vec2(1.,0.));float i=c(g+vec2(0.,1.));float j=c(g+vec2(1.,1.));vec2 k=h*h*(3.-2.*h);return mix(J,K,k.x)+(i-J)*k.y*(1.-k.x)+(j-K)*k.x*k.y;}vec3 l(in vec2 Z){vec2 g=floor(Z);vec2 h=fract(Z);\n#if 1\nvec2 k=h*h*h*(h*(h*6.-15.)+10.);vec2 m=30.*h*h*(h*(h-2.)+1.);\n#else\nvec2 k=h*h*(3.-2.*h);vec2 m=6.*h*(1.-h);\n#endif    \nfloat n=c(g);float o=c(g+vec2(1.,0.));float p=c(g+vec2(0.,1.));float q=c(g+vec2(1.,1.));float r=n;float s=o-n;float t=p-n;float u=n-o-p+q;vec3 v=vec3(n+(o-n)*k.x+(p-n)*k.y+(n-o-p+q)*k.x*k.y,m*(k.yx*(n-o-p+q)+vec2(o,p)-n));return v;}float w(in vec2 x,const int y){float T=0.;float J=0.5;vec2 z=vec2(100.);mat2 AA=mat2(cos(0.5),sin(0.5),-sin(0.5),cos(0.50));for(int g=0;g<10;++g){if(g>=y)break;T+=J*f(x);x=AA*x*2.+z;J*=0.2;}return T;}float AB(vec2 Z){const float AC=0.366025404;const float AD=0.211324865;vec2 g=floor(Z+(Z.x+Z.y)*AC);vec2 J=Z-g+(g.x+g.y)*AD;float AE=step(J.y,J.x);vec2 AF=vec2(AE,1.-AE);vec2 K=J-AF+AD;vec2 i=J-1.+2.*AD;vec3 M=max(0.5-vec3(dot(J,J),dot(K,K),dot(i,i)),0.);vec3 AG=M*M*M*M*vec3(dot(J,vec2(c(g+0.))),dot(K,vec2(c(g+AF))),dot(i,vec2(c(g+1.))));return dot(AG,vec3(70.));}float AH(vec2 d){float AG=f(d*.5+B*2.*vec2(f(d*.2),f(d*.2+10.)));AG+=.25*f(d*2.+B*vec2(f(d*.3+50.),f(d*.2+20.)));return AG*.005/(1.+.25);}vec3 AI(vec3 Z,vec3 AJ,float AK){vec3 AL=normalize(C-Z);float AM=length(C-Z);vec3 AN=vec3(0.,0.,1.);if(AM<150.){vec2 AO=vec2(.1,0.);vec2 AP=AH(Z.xy)-vec2(AH(Z.xy+AO.xy),AH(Z.xy+AO.yx));AN=mix(AN,normalize(vec3(AP*1./AO.x,1.)),clamp(exp(-(AM-50.)*5./500.),0.,1.));}vec3 AQ=vec3(9,87,171)/180.;vec3 AR=vec3(20,43,74)/230.;float AS=1.-exp(-AK*.03);vec3 AT=mix(AQ,AR,AS);vec3 AU=reflect(-E,AN);float AV=2.2*pow(max(dot(AL,AU),0.),128.);float AW=max(dot(E,vec3(0.,0.,1.)),0.);AT*=AW+AV;float AX=(1.-exp(-AK*.3)+.1)*step(0.1,AK);return mix(AJ,AT,AX);}\n#define AY vec3(212, 149, 99)/255.\n#define AZ vec3(102, 83, 67)/255.\nfloat Aa(vec2 d){int y=2;d=X(d,0.005*f(d*10.*0.436));d.x*=3.;d=d+vec2(w(d,y)-20.,w(d+10.,y)+50.);d=d+10.*0.332*vec2(w(d,y)-40.,w(d+10.,y)+500.);float AG=w(d,y);return AG;}vec4 Ab(vec2 d,vec3 AN,float AM){if(AM>500.){return vec4(AN,0.);}float M=Aa(d);vec2 AO=vec2(.1,0.);vec2 AP=M-vec2(Aa(d+AO.xy),Aa(d+AO.yx));return vec4(mix(AN,normalize(vec3(AP*1./AO.x,1.)),clamp(exp(-(AM-50.)*5./500.),0.,1.)),M);}vec3 Ac(vec3 Z,vec3 AN){vec3 AL=normalize(C-Z);float AM=length(C-Z);vec4 Ad=Ab(Z.yx*.2,AN,AM);AN=mix(AN,Ad.rgb,.05);vec3 Ae=vec3(1.,1.,1.)*.2;vec3 Af=vec3(1.)*max(dot(E,AN),0.);vec3 AU=reflect(-E,AN);float Ag=pow(max(dot(AL,AU),0.),32.);vec3 Ah=vec3(1.)*Ag*.6;vec3 Ai=mix(AY,AZ,pow(Ad.w,.8));return Ai*(Af+Ae+Ah);}\n#define Aj vec3(79, 163, 44)/255.\n#define Ak vec3(38, 79, 21)/255.\nfloat Al(vec2 d){float AG=Y(d*2000.);AG=step(0.868,AG);AG=clamp(AG+0.496,0.,1.)*f(d*20.);AG=pow(AG,0.6);return AG;}vec4 Am(vec2 d,vec3 AN,float AM){if(AM>500.){return vec4(AN,0.);}float M=Al(d);vec2 AO=vec2(.1,0.);vec2 AP=M-vec2(Al(d+AO.xy),Al(d+AO.yx));return vec4(mix(AN,normalize(vec3(AP*1./AO.x,1.)),clamp(exp(-(AM-50.)*5./500.),0.,1.)),M);}vec3 An(vec3 Z,vec3 AN){vec3 AL=normalize(C-Z);float AM=length(C-Z);vec4 Ad=Am(Z.xy*1.,AN,AM);vec3 Ae=vec3(1.)*.2;vec3 Af=vec3(1.)*max(dot(E,AN),0.);vec3 AU=reflect(-E,AN);float Ag=pow(max(dot(AL,AU),0.),32.);vec3 Ah=Ag*vec3(1.)*.25*clamp(.3+Ad.w,0.,1.);vec3 Ai=mix(Aj,Ak,0.);return Ai*(Af+Ae+Ah);}vec3 Ao(vec3 Z,vec3 AN){float Ap=dot(AN,vec3(0.,0.,1.));Ap=pow(Ap,15.);Ap=smoothstep(.2,.7,Ap);vec3 Aq=mix(AY,Aj,Ap);vec3 Ar=vec3(1.)*1.;vec3 As=vec3(1.)*1.;vec3 Ae=vec3(1.,1.,1.)*.2;vec3 Af=Ar*max(dot(E,AN),0.);vec3 AL=normalize(C-Z);vec3 AU=reflect(-E,AN);float Ag=pow(max(dot(AL,AU),0.),1024.);vec3 Ah=Ag*As*.1;\n#if 0\nfloat At=Au(Z+E*1.,Av,2.);At=clamp(At,0.9,1.);\n#else\nfloat At=1.;\n#endif\nvec3 Aw=Aq*At*(Af+Ae+Ah);vec3 Ax=An(Z,AN);vec3 Ay=Ac(Z,AN);return mix(Ay,Ax,Ap);}\n#define Az 500\n#define BA .05\n#define BB 2000.\n#define BC 0.\n#define BD 150.\n#define BE 50.\nfloat BF(float AM){float BG=80.,BH=.005;return max(0.,AM-BG)*BH+BA;}vec3 BI(vec3 Z){vec2 BJ=Z.xy*.11+100.;vec3 BK=vec3(0.);BK+=6.*l(BJ*.1);BK+=5.5*l(BJ*.15+5.);BK+=2.85*l(BJ*.2-10.);BK+=1.475*l(BJ*.4+30.);BK+=.3875*l(BJ*.8-15.);BK+=.1875*l(BJ*1.6-15.);BK/=6.+5.5+2.85+1.475+.3875+.1875;float BL=1.2;BK.yz=BK.yz*BL*pow(BK.x,BL-1.);BK.x=pow(BK.x,BL);BK.x*=BD;return BK;}vec3 BM(vec3 Z,float j){vec2 BN=vec2(.001,0.);vec3 AG=vec3(BI(Z-BN.xyy).x-BI(Z+BN.xyy).x,BI(Z-BN.yxy).x-BI(Z+BN.yxy).x,2.*BN.x);return normalize(AG);}float BO(vec3 BP,vec3 BQ,out float AM,out vec3 AN,out vec3 Ai){float BR=2.1,Ap=1.1;if(BP.z>BD&&BQ.z>=0.){return-1.;}else if(BP.z>BD){float i=dot(BQ,normalize(vec3(BQ.x,BQ.y,BP.z)));Ap=(BP.z-BD)/sqrt(1.-i*i);}for(int g=0;g<Az;++g){vec3 Z=BP+BQ*Ap;if(Z.z>BD&&BQ.z>=0.){return-1.;}vec3 BS=BI(Z);float M=BS.x;if(Z.z<=M&&BF(Ap)>M-Z.z){AM=Ap;AN=normalize(cross(normalize(vec3(1.,0.,BS.y)),normalize(vec3(0.,1.,BS.z))));float BT=max(0.,(BE-Z.z))/dot(BQ,vec3(0.,0.,-1.));vec3 BU=BP+BQ*(Ap-BT);Ai=Ao(Z,AN);Ai=AI(BU,Ai,BT);return 1.;}else if(Z.z<=M){Ap-=BR;BR/=10.;}if(Ap>BB){return-1.;}BR+=.0001*Ap;Ap+=BR;}return-1.;}vec3 BV(vec3 BW,float j){float BX=1.-clamp(exp(-(j-1000.)*(1./100.))*2.,0.,1.);return mix(BW,F,BX);}void main(){vec2 d=gl_FragCoord.xy/A.xy;d-=.5;d.x*=A.x/A.y;vec3 BP=C-D*.9;vec3 BY=normalize(cross(D,vec3(0.,0.,1.)));vec3 BZ=cross(D,BY);vec3 BQ=d.x*BY-d.y*BZ-BP+C;float j;vec3 AN;vec3 BW;float Ba=BO(BP,BQ,j,AN,BW);vec3 Z=BP+BQ*j;if(Ba<0.){gl_FragColor=vec4(F,1.);return;}BW=BV(BW,j);gl_FragColor=vec4(BW,1.);}",uniforms:{resolution:{variableName:"A",variableType:"vec2"},time:{variableName:"B",variableType:"float"},cameraPosition:{variableName:"C",variableType:"vec3"},cameraDirection:{variableName:"D",variableType:"vec3"}},consts:{}}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}(()=>{"use strict";let e=Float32Array;function t(t,n,r){const o=new e(3);return t&&(o[0]=t),n&&(o[1]=n),r&&(o[2]=r),o}function r(t,n,r){return(r=r||new e(3))[0]=t[0]+n[0],r[1]=t[1]+n[1],r[2]=t[2]+n[2],r}let o=Float32Array;function i(e,n,r){r=r||t();const o=n[0],i=n[1],a=n[2],c=o*e[3]+i*e[7]+a*e[11]+e[15];return r[0]=(o*e[0]+i*e[4]+a*e[8]+e[12])/c,r[1]=(o*e[1]+i*e[5]+a*e[9]+e[13])/c,r[2]=(o*e[2]+i*e[6]+a*e[10]+e[14])/c,r}function a(e,n,r){r=r||t();const o=n[0],i=n[1],a=n[2];return r[0]=o*e[0]+i*e[4]+a*e[8],r[1]=o*e[1]+i*e[5]+a*e[9],r[2]=o*e[2]+i*e[6]+a*e[10],r}const c=5120,s=5121,u=5124;{const e={};e[c]=Int8Array,e[5121]=Uint8Array,e[5122]=Int16Array,e[5123]=Uint16Array,e[u]=Int32Array,e[5125]=Uint32Array,e[5126]=Float32Array,e[32819]=Uint16Array,e[32820]=Uint16Array,e[33635]=Uint16Array,e[5131]=Uint16Array,e[33640]=Uint32Array,e[35899]=Uint32Array,e[35902]=Uint32Array,e[36269]=Uint32Array,e[34042]=Uint32Array}function f(e){if(e instanceof Int8Array)return c;if(e instanceof Uint8Array)return s;if(e instanceof Uint8ClampedArray)return s;if(e instanceof Int16Array)return 5122;if(e instanceof Uint16Array)return 5123;if(e instanceof Int32Array)return u;if(e instanceof Uint32Array)return 5125;if(e instanceof Float32Array)return 5126;throw new Error("unsupported typed array type")}const l="undefined"!=typeof SharedArrayBuffer?function(e){return e&&e.buffer&&(e.buffer instanceof ArrayBuffer||e.buffer instanceof SharedArrayBuffer)}:function(e){return e&&e.buffer&&e.buffer instanceof ArrayBuffer};function v(e,t){return"undefined"!=typeof WebGLTexture&&t instanceof WebGLTexture}const d=34962,A="";function m(e,t,n,r){if("undefined"!=typeof WebGLBuffer&&t instanceof WebGLBuffer)return t;n=n||d;const o=e.createBuffer();return function(e,t,n,r,o){e.bindBuffer(t,n),e.bufferData(t,r,o||35044)}(e,n,o,t,r),o}function y(e){return"indices"===e}function p(e){return e.length?e:e.data}const h=/coord|texture/i,b=/color|colour/i;function x(e,t){let n;if(n=h.test(e)?2:b.test(e)?4:3,t%n>0)throw new Error(`Can not guess numComponents for attribute '${e}'. Tried ${n} but ${t} values is not evenly divisible by ${n}. You should specify it.`);return n}function g(e,t){return e.numComponents||e.size||x(t,p(e).length)}function B(e,t){if(l(e))return e;if(l(e.data))return e.data;Array.isArray(e)&&(e={data:e});let n=e.type;return n||(n=y(t)?Uint16Array:Float32Array),new n(e.data)}function z(e,t){const n={};return Object.keys(t).forEach((function(r){if(!y(r)){const i=t[r],a=i.attrib||i.name||i.attribName||A+r;if(i.value){if(!Array.isArray(i.value)&&!l(i.value))throw new Error("array.value is not array or typedarray");n[a]={value:i.value}}else{let t,l,v,A;if(i.buffer&&i.buffer instanceof WebGLBuffer)t=i.buffer,A=i.numComponents||i.size,l=i.type,v=i.normalize;else if("number"==typeof i||"number"==typeof i.data){const n=i.data||i,a=i.type||Float32Array,f=n*a.BYTES_PER_ELEMENT;l=function(e){if(e===Int8Array)return c;if(e===Uint8Array)return s;if(e===Uint8ClampedArray)return s;if(e===Int16Array)return 5122;if(e===Uint16Array)return 5123;if(e===Int32Array)return u;if(e===Uint32Array)return 5125;if(e===Float32Array)return 5126;throw new Error("unsupported typed array type")}(a),v=void 0!==i.normalize?i.normalize:(o=a)===Int8Array||o===Uint8Array,A=i.numComponents||i.size||x(r,n),t=e.createBuffer(),e.bindBuffer(d,t),e.bufferData(d,f,i.drawType||35044)}else{const n=B(i,r);t=m(e,n,void 0,i.drawType),l=f(n),v=void 0!==i.normalize?i.normalize:function(e){return e instanceof Int8Array||e instanceof Uint8Array}(n),A=g(i,r)}n[a]={buffer:t,numComponents:A,type:l,normalize:v,stride:i.stride||0,offset:i.offset||0,divisor:void 0===i.divisor?void 0:i.divisor,drawType:i.drawType}}}var o})),e.bindBuffer(d,null),n}const M=["position","positions","a_position"];function E(e,t,n){const r=z(e,t),o=Object.assign({},n||{});o.attribs=Object.assign({},n?n.attribs:{},r);const i=t.indices;if(i){const t=B(i,"indices");o.indices=m(e,t,34963),o.numElements=t.length,o.elementType=f(t)}else o.numElements||(o.numElements=function(e,t){let n,r;for(r=0;r<M.length&&(n=M[r],!(n in t))&&(n=A+n,!(n in t));++r);r===M.length&&(n=Object.keys(t)[0]);const o=t[n];e.bindBuffer(d,o.buffer);const i=e.getBufferParameter(d,34660);var a;e.bindBuffer(d,null);const c=i/(5120===(a=o.type)||5121===a?1:5122===a||5123===a?2:5124===a||5125===a||5126===a?4:0),s=o.numComponents||o.size,u=c/s;if(u%1!=0)throw new Error(`numComponents ${s} not correct for length ${length}`);return u}(e,o.attribs));return o}function w(e,t){const n={};return Object.keys(t).forEach((function(r){n[r]=function(e,t,n){const r="indices"===n?34963:d;return m(e,B(t,n),r)}(e,t[r],r)})),t.indices?(n.numElements=t.indices.length,n.elementType=f(B(t.indices))):n.numElements=function(e){let t,n;for(n=0;n<M.length&&(t=M[n],!(t in e));++n);n===M.length&&(t=Object.keys(e)[0]);const r=e[t],o=p(r).length,i=g(r,t),a=o/i;if(o%i>0)throw new Error(`numComponents ${i} not correct for length ${o}`);return a}(t),n}function T(e,t,n){return function(e,t){let n=0;return e.push=function(){for(let t=0;t<arguments.length;++t){const r=arguments[t];if(r instanceof Array||l(r))for(let t=0;t<r.length;++t)e[n++]=r[t];else e[n++]=r}},e.reset=function(e){n=e||0},e.numComponents=t,Object.defineProperty(e,"numElements",{get:function(){return this.length/this.numComponents|0}}),e}(new(n||Float32Array)(e*t),e)}function C(e,t,n){const r=e.length,o=new Float32Array(3);for(let i=0;i<r;i+=3)n(t,[e[i],e[i+1],e[i+2]],o),e[i]=o[0],e[i+1]=o[1],e[i+2]=o[2]}function k(e,n,r){r=r||t();const o=n[0],i=n[1],a=n[2];return r[0]=o*e[0]+i*e[1]+a*e[2],r[1]=o*e[4]+i*e[5]+a*e[6],r[2]=o*e[8]+i*e[9]+a*e[10],r}function P(e,t){return C(e,function(e,t){t=t||new o(16);const n=e[0],r=e[1],i=e[2],a=e[3],c=e[4],s=e[5],u=e[6],f=e[7],l=e[8],v=e[9],d=e[10],A=e[11],m=e[12],y=e[13],p=e[14],h=e[15],b=d*h,x=p*A,g=u*h,B=p*f,z=u*A,M=d*f,E=i*h,w=p*a,T=i*A,C=d*a,k=i*f,P=u*a,S=l*y,U=m*v,L=c*y,I=m*s,N=c*v,F=l*s,O=n*y,J=m*r,Z=n*v,D=l*r,K=n*s,G=c*r,q=b*s+B*v+z*y-(x*s+g*v+M*y),R=x*r+E*v+C*y-(b*r+w*v+T*y),W=g*r+w*s+k*y-(B*r+E*s+P*y),_=M*r+T*s+P*v-(z*r+C*s+k*v),j=1/(n*q+c*R+l*W+m*_);return t[0]=j*q,t[1]=j*R,t[2]=j*W,t[3]=j*_,t[4]=j*(x*c+g*l+M*m-(b*c+B*l+z*m)),t[5]=j*(b*n+w*l+T*m-(x*n+E*l+C*m)),t[6]=j*(B*n+E*c+P*m-(g*n+w*c+k*m)),t[7]=j*(z*n+C*c+k*l-(M*n+T*c+P*l)),t[8]=j*(S*f+I*A+N*h-(U*f+L*A+F*h)),t[9]=j*(U*a+O*A+D*h-(S*a+J*A+Z*h)),t[10]=j*(L*a+J*f+K*h-(I*a+O*f+G*h)),t[11]=j*(F*a+Z*f+G*A-(N*a+D*f+K*A)),t[12]=j*(L*d+F*p+U*u-(N*p+S*u+I*d)),t[13]=j*(Z*p+S*i+J*d-(O*d+D*p+U*i)),t[14]=j*(O*u+G*p+I*i-(K*p+L*i+J*u)),t[15]=j*(K*d+N*i+D*u-(Z*u+G*d+F*i)),t}(t),k),e}function S(e,t){return Object.keys(e).forEach((function(n){const r=e[n];n.indexOf("pos")>=0?function(e,t){C(e,t,i)}(r,t):n.indexOf("tan")>=0||n.indexOf("binorm")>=0?function(e,t){C(e,t,a)}(r,t):n.indexOf("norm")>=0&&P(r,t)})),e}function U(e,t,n){return e=e||2,{position:{numComponents:2,data:[(t=t||0)+-1*(e*=.5),(n=n||0)+-1*e,t+1*e,n+-1*e,t+-1*e,n+1*e,t+1*e,n+1*e]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function L(e,t,n,r,i){var a;e=e||1,t=t||1,n=n||1,r=r||1,i=i||((a=a||new o(16))[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a);const c=(n+1)*(r+1),s=T(3,c),u=T(3,c),f=T(2,c);for(let o=0;o<=r;o++)for(let i=0;i<=n;i++){const a=i/n,c=o/r;s.push(e*a-.5*e,0,t*c-.5*t),u.push(0,1,0),f.push(a,c)}const l=n+1,v=T(3,n*r*2,Uint16Array);for(let e=0;e<r;e++)for(let t=0;t<n;t++)v.push((e+0)*l+t,(e+1)*l+t,(e+0)*l+t+1),v.push((e+1)*l+t,(e+1)*l+t+1,(e+0)*l+t+1);return S({position:s,normal:u,texcoord:f,indices:v},i)}function I(e,t,n,r,o,i,a){if(t<=0||n<=0)throw new Error("subdivisionAxis and subdivisionHeight must be > 0");r=r||0,i=i||0;const c=(o=o||Math.PI)-r,s=(a=a||2*Math.PI)-i,u=(t+1)*(n+1),f=T(3,u),l=T(3,u),v=T(2,u);for(let o=0;o<=n;o++)for(let a=0;a<=t;a++){const u=a/t,d=o/n,A=s*u+i,m=c*d+r,y=Math.sin(A),p=Math.cos(A),h=Math.sin(m),b=p*h,x=Math.cos(m),g=y*h;f.push(e*b,e*x,e*g),l.push(b,x,g),v.push(1-u,d)}const d=t+1,A=T(3,t*n*2,Uint16Array);for(let e=0;e<t;e++)for(let t=0;t<n;t++)A.push((t+0)*d+e,(t+0)*d+e+1,(t+1)*d+e),A.push((t+1)*d+e,(t+0)*d+e+1,(t+1)*d+e+1);return{position:f,normal:l,texcoord:v,indices:A}}const N=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]];function F(e){const t=(e=e||1)/2,n=[[-t,-t,-t],[+t,-t,-t],[-t,+t,-t],[+t,+t,-t],[-t,-t,+t],[+t,-t,+t],[-t,+t,+t],[+t,+t,+t]],r=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],o=[[1,0],[0,0],[0,1],[1,1]],i=T(3,24),a=T(3,24),c=T(2,24),s=T(3,12,Uint16Array);for(let e=0;e<6;++e){const t=N[e];for(let s=0;s<4;++s){const u=n[t[s]],f=r[e],l=o[s];i.push(u),a.push(f),c.push(l)}const u=4*e;s.push(u+0,u+1,u+2),s.push(u+0,u+2,u+3)}return{position:i,normal:a,texcoord:c,indices:s}}function O(e,t,n,r,o,i,a){if(r<3)throw new Error("radialSubdivisions must be 3 or greater");if(o<1)throw new Error("verticalSubdivisions must be 1 or greater");const c=void 0===i||i,s=void 0===a||a,u=(c?2:0)+(s?2:0),f=(r+1)*(o+1+u),l=T(3,f),v=T(3,f),d=T(2,f),A=T(3,r*(o+u/2)*2,Uint16Array),m=r+1,y=Math.atan2(e-t,n),p=Math.cos(y),h=Math.sin(y),b=o+(s?2:0);for(let i=c?-2:0;i<=b;++i){let a,c=i/o,s=n*c;i<0?(s=0,c=1,a=e):i>o?(s=n,c=1,a=t):a=e+i/o*(t-e),-2!==i&&i!==o+2||(a=0,c=0),s-=n/2;for(let e=0;e<m;++e){const t=Math.sin(e*Math.PI*2/r),n=Math.cos(e*Math.PI*2/r);l.push(t*a,s,n*a),i<0?v.push(0,-1,0):i>o?v.push(0,1,0):0===a?v.push(0,0,0):v.push(t*p,h,n*p),d.push(e/r,1-c)}}for(let e=0;e<o+u;++e)if(!(1===e&&c||e===o+u-2&&s))for(let t=0;t<r;++t)A.push(m*(e+0)+0+t,m*(e+0)+1+t,m*(e+1)+1+t),A.push(m*(e+0)+0+t,m*(e+1)+1+t,m*(e+1)+0+t);return{position:l,normal:v,texcoord:d,indices:A}}function J(e,t){t=t||[];const n=[];for(let r=0;r<e.length;r+=4){const o=e[r],i=e.slice(r+1,r+4);i.push.apply(i,t);for(let e=0;e<o;++e)n.push.apply(n,i)}return n}function Z(){const e=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],t=J([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),n=J([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),r=e.length/3,o={position:T(3,r),texcoord:T(2,r),normal:T(3,r),color:T(4,r,Uint8Array),indices:T(3,r/3,Uint16Array)};o.position.push(e),o.texcoord.push([.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0]),o.normal.push(t),o.color.push(n);for(let e=0;e<r;++e)o.indices.push(e);return o}function D(t,n,o,i,a,c,s){if(a<=0)throw new Error("subdivisionDown must be > 0");const u=(s=s||1)-(c=c||0),f=2*(a+1)*4,l=T(3,f),v=T(3,f),d=T(2,f);function A(e,t,n){return e+(t-e)*n}function m(n,o,s,f,m,y){for(let x=0;x<=a;x++){const g=o/1,B=x/a,z=2*(g-.5),M=(c+B*u)*Math.PI,E=Math.sin(M),w=Math.cos(M),T=A(t,n,E),C=z*i,k=w*t,P=E*T;l.push(C,k,P);const S=r((p=[0,E,w],h=s,(b=(b=void 0)||new e(3))[0]=p[0]*h[0],b[1]=p[1]*h[1],b[2]=p[2]*h[2],b),f);v.push(S),d.push(g*m+y,B)}var p,h,b}for(let e=0;e<2;e++){const t=2*(e/1-.5);m(n,e,[1,1,1],[0,0,0],1,0),m(n,e,[0,0,0],[t,0,0],0,0),m(o,e,[1,1,1],[0,0,0],1,0),m(o,e,[0,0,0],[t,0,0],0,1)}const y=T(3,2*a*4,Uint16Array);function p(e,t){for(let n=0;n<a;++n)y.push(e+n+0,e+n+1,t+n+0),y.push(e+n+1,t+n+1,t+n+0)}const h=a+1;return p(0*h,4*h),p(5*h,7*h),p(6*h,2*h),p(3*h,1*h),{position:l,normal:v,texcoord:d,indices:y}}function K(e,t,n,r,o,i){return O(e,e,t,n,r,o,i)}function G(e,t,n,r,o,i){if(n<3)throw new Error("radialSubdivisions must be 3 or greater");if(r<3)throw new Error("verticalSubdivisions must be 3 or greater");o=o||0;const a=(i=i||2*Math.PI)-o,c=n+1,s=r+1,u=c*s,f=T(3,u),l=T(3,u),v=T(2,u),d=T(3,n*r*2,Uint16Array);for(let i=0;i<s;++i){const s=i/r,u=s*Math.PI*2,d=Math.sin(u),A=e+d*t,m=Math.cos(u),y=m*t;for(let e=0;e<c;++e){const t=e/n,r=o+t*a,i=Math.sin(r),c=Math.cos(r),u=i*A,p=c*A,h=i*d,b=c*d;f.push(u,y,p),l.push(h,m,b),v.push(t,1-s)}}for(let e=0;e<r;++e)for(let t=0;t<n;++t){const n=1+t,r=1+e;d.push(c*e+t,c*r+t,c*e+n),d.push(c*r+t,c*r+n,c*e+n)}return{position:f,normal:l,texcoord:v,indices:d}}function q(e,t,n,r,o){if(t<3)throw new Error("divisions must be at least 3");o=o||1,r=r||0;const i=(t+1)*((n=n||1)+1),a=T(3,i),c=T(3,i),s=T(2,i),u=T(3,n*t*2,Uint16Array);let f=0;const l=e-r,v=t+1;for(let e=0;e<=n;++e){const i=r+l*Math.pow(e/n,o);for(let r=0;r<=t;++r){const o=2*Math.PI*r/t,l=i*Math.cos(o),d=i*Math.sin(o);if(a.push(l,0,d),c.push(0,1,0),s.push(1-r/t,e/n),e>0&&r!==t){const e=f+(r+1),t=f+r,n=f+r-v,o=f+(r+1)-v;u.push(e,t,n),u.push(e,n,o)}}f+=t+1}return{position:a,normal:c,texcoord:s,indices:u}}function R(e){return function(t){const n=e.apply(this,Array.prototype.slice.call(arguments,1));return w(t,n)}}function W(e){return function(t){const n=e.apply(null,Array.prototype.slice.call(arguments,1));return E(t,n)}}function _(e){return!!e.texStorage2D}W(Z),R(Z),W(F),R(F),W(L),R(L),W(I),R(I),W(O),R(O),W(U),R(U),W(D),R(D),W(K),R(K),W(G),R(G),W(q),R(q);const j=function(){const e={},t={};return function(n,r){return function(n){const r=n.constructor.name;if(!e[r]){for(const e in n)if("number"==typeof n[e]){const r=t[n[e]];t[n[e]]=r?`${r} | ${e}`:e}e[r]=!0}}(n),t[r]||("number"==typeof r?`0x${r.toString(16)}`:r)}}();new Uint8Array([128,192,255,255]);{const e={};e[6406]={numColorComponents:1},e[6409]={numColorComponents:1},e[6410]={numColorComponents:2},e[6407]={numColorComponents:3},e[6408]={numColorComponents:4},e[6403]={numColorComponents:1},e[36244]={numColorComponents:1},e[33319]={numColorComponents:2},e[33320]={numColorComponents:2},e[6407]={numColorComponents:3},e[36248]={numColorComponents:3},e[6408]={numColorComponents:4},e[36249]={numColorComponents:4},e[6402]={numColorComponents:1},e[34041]={numColorComponents:2}}const $=function(...e){console.error(...e)};function Q(e){return"undefined"!=typeof document&&document.getElementById?document.getElementById(e):null}const V=33984,H=34962,Y=3553,X=34067,ee=32879,te=35866,ne={};function re(e,t){return ne[t].bindPoint}function oe(e,t){return function(n){e.uniform1i(t,n)}}function ie(e,t){return function(n){e.uniform1iv(t,n)}}function ae(e,t){return function(n){e.uniform2iv(t,n)}}function ce(e,t){return function(n){e.uniform3iv(t,n)}}function se(e,t){return function(n){e.uniform4iv(t,n)}}function ue(e,t,n,r){const o=re(0,t);return _(e)?function(t){let i,a;v(0,t)?(i=t,a=null):(i=t.texture,a=t.sampler),e.uniform1i(r,n),e.activeTexture(V+n),e.bindTexture(o,i),e.bindSampler(n,a)}:function(t){e.uniform1i(r,n),e.activeTexture(V+n),e.bindTexture(o,t)}}function fe(e,t,n,r,o){const i=re(0,t),a=new Int32Array(o);for(let e=0;e<o;++e)a[e]=n+e;return _(e)?function(t){e.uniform1iv(r,a),t.forEach((function(t,r){let o,c;e.activeTexture(V+a[r]),v(0,t)?(o=t,c=null):(o=t.texture,c=t.sampler),e.bindSampler(n,c),e.bindTexture(i,o)}))}:function(t){e.uniform1iv(r,a),t.forEach((function(t,n){e.activeTexture(V+a[n]),e.bindTexture(i,t)}))}}function le(e,t){return function(n){if(n.value)switch(e.disableVertexAttribArray(t),n.value.length){case 4:e.vertexAttrib4fv(t,n.value);break;case 3:e.vertexAttrib3fv(t,n.value);break;case 2:e.vertexAttrib2fv(t,n.value);break;case 1:e.vertexAttrib1fv(t,n.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else e.bindBuffer(H,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,n.numComponents||n.size,n.type||5126,n.normalize||!1,n.stride||0,n.offset||0),void 0!==n.divisor&&e.vertexAttribDivisor(t,n.divisor)}}function ve(e,t){return function(n){if(n.value){if(e.disableVertexAttribArray(t),4!==n.value.length)throw new Error("The length of an integer constant value must be 4!");e.vertexAttrib4iv(t,n.value)}else e.bindBuffer(H,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,n.numComponents||n.size,n.type||5124,n.stride||0,n.offset||0),void 0!==n.divisor&&e.vertexAttribDivisor(t,n.divisor)}}function de(e,t){return function(n){if(n.value){if(e.disableVertexAttribArray(t),4!==n.value.length)throw new Error("The length of an unsigned integer constant value must be 4!");e.vertexAttrib4uiv(t,n.value)}else e.bindBuffer(H,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,n.numComponents||n.size,n.type||5125,n.stride||0,n.offset||0),void 0!==n.divisor&&e.vertexAttribDivisor(t,n.divisor)}}function Ae(e,t,n){const r=n.size,o=n.count;return function(n){e.bindBuffer(H,n.buffer);const i=n.size||n.numComponents||r,a=i/o,c=n.type||5126,s=ne[c].size*i,u=n.normalize||!1,f=n.offset||0,l=s/o;for(let r=0;r<o;++r)e.enableVertexAttribArray(t+r),e.vertexAttribPointer(t+r,a,c,u,s,f+l*r),void 0!==n.divisor&&e.vertexAttribDivisor(t+r,n.divisor)}}ne[5126]={Type:Float32Array,size:4,setter:function(e,t){return function(n){e.uniform1f(t,n)}},arraySetter:function(e,t){return function(n){e.uniform1fv(t,n)}}},ne[35664]={Type:Float32Array,size:8,setter:function(e,t){return function(n){e.uniform2fv(t,n)}}},ne[35665]={Type:Float32Array,size:12,setter:function(e,t){return function(n){e.uniform3fv(t,n)}}},ne[35666]={Type:Float32Array,size:16,setter:function(e,t){return function(n){e.uniform4fv(t,n)}}},ne[5124]={Type:Int32Array,size:4,setter:oe,arraySetter:ie},ne[35667]={Type:Int32Array,size:8,setter:ae},ne[35668]={Type:Int32Array,size:12,setter:ce},ne[35669]={Type:Int32Array,size:16,setter:se},ne[5125]={Type:Uint32Array,size:4,setter:function(e,t){return function(n){e.uniform1ui(t,n)}},arraySetter:function(e,t){return function(n){e.uniform1uiv(t,n)}}},ne[36294]={Type:Uint32Array,size:8,setter:function(e,t){return function(n){e.uniform2uiv(t,n)}}},ne[36295]={Type:Uint32Array,size:12,setter:function(e,t){return function(n){e.uniform3uiv(t,n)}}},ne[36296]={Type:Uint32Array,size:16,setter:function(e,t){return function(n){e.uniform4uiv(t,n)}}},ne[35670]={Type:Uint32Array,size:4,setter:oe,arraySetter:ie},ne[35671]={Type:Uint32Array,size:8,setter:ae},ne[35672]={Type:Uint32Array,size:12,setter:ce},ne[35673]={Type:Uint32Array,size:16,setter:se},ne[35674]={Type:Float32Array,size:16,setter:function(e,t){return function(n){e.uniformMatrix2fv(t,!1,n)}}},ne[35675]={Type:Float32Array,size:36,setter:function(e,t){return function(n){e.uniformMatrix3fv(t,!1,n)}}},ne[35676]={Type:Float32Array,size:64,setter:function(e,t){return function(n){e.uniformMatrix4fv(t,!1,n)}}},ne[35685]={Type:Float32Array,size:24,setter:function(e,t){return function(n){e.uniformMatrix2x3fv(t,!1,n)}}},ne[35686]={Type:Float32Array,size:32,setter:function(e,t){return function(n){e.uniformMatrix2x4fv(t,!1,n)}}},ne[35687]={Type:Float32Array,size:24,setter:function(e,t){return function(n){e.uniformMatrix3x2fv(t,!1,n)}}},ne[35688]={Type:Float32Array,size:48,setter:function(e,t){return function(n){e.uniformMatrix3x4fv(t,!1,n)}}},ne[35689]={Type:Float32Array,size:32,setter:function(e,t){return function(n){e.uniformMatrix4x2fv(t,!1,n)}}},ne[35690]={Type:Float32Array,size:48,setter:function(e,t){return function(n){e.uniformMatrix4x3fv(t,!1,n)}}},ne[35678]={Type:null,size:0,setter:ue,arraySetter:fe,bindPoint:Y},ne[35680]={Type:null,size:0,setter:ue,arraySetter:fe,bindPoint:X},ne[35679]={Type:null,size:0,setter:ue,arraySetter:fe,bindPoint:ee},ne[35682]={Type:null,size:0,setter:ue,arraySetter:fe,bindPoint:Y},ne[36289]={Type:null,size:0,setter:ue,arraySetter:fe,bindPoint:te},ne[36292]={Type:null,size:0,setter:ue,arraySetter:fe,bindPoint:te},ne[36293]={Type:null,size:0,setter:ue,arraySetter:fe,bindPoint:X},ne[36298]={Type:null,size:0,setter:ue,arraySetter:fe,bindPoint:Y},ne[36299]={Type:null,size:0,setter:ue,arraySetter:fe,bindPoint:ee},ne[36300]={Type:null,size:0,setter:ue,arraySetter:fe,bindPoint:X},ne[36303]={Type:null,size:0,setter:ue,arraySetter:fe,bindPoint:te},ne[36306]={Type:null,size:0,setter:ue,arraySetter:fe,bindPoint:Y},ne[36307]={Type:null,size:0,setter:ue,arraySetter:fe,bindPoint:ee},ne[36308]={Type:null,size:0,setter:ue,arraySetter:fe,bindPoint:X},ne[36311]={Type:null,size:0,setter:ue,arraySetter:fe,bindPoint:te};const me={};me[5126]={size:4,setter:le},me[35664]={size:8,setter:le},me[35665]={size:12,setter:le},me[35666]={size:16,setter:le},me[5124]={size:4,setter:ve},me[35667]={size:8,setter:ve},me[35668]={size:12,setter:ve},me[35669]={size:16,setter:ve},me[5125]={size:4,setter:de},me[36294]={size:8,setter:de},me[36295]={size:12,setter:de},me[36296]={size:16,setter:de},me[35670]={size:4,setter:ve},me[35671]={size:8,setter:ve},me[35672]={size:12,setter:ve},me[35673]={size:16,setter:ve},me[35674]={size:4,setter:Ae,count:2},me[35675]={size:9,setter:Ae,count:3},me[35676]={size:16,setter:Ae,count:4};const ye=/ERROR:\s*\d+:(\d+)/gi;function pe(e,t="",n=0){const r=[...t.matchAll(ye)],o=new Map(r.map(((e,n)=>{const o=parseInt(e[1]),i=r[n+1],a=i?i.index:t.length;return[o-1,t.substring(e.index,a)]})));return e.split("\n").map(((e,t)=>{const r=o.get(t);return`${t+1+n}: ${e}${r?`\n\n^^^ ${r}`:""}`})).join("\n")}const he=/^[ \t]*\n/;function be(e,t,n,r){const o=r||$,i=e.createShader(n);let a=0;if(he.test(t)&&(a=1,t=t.replace(he,"")),e.shaderSource(i,t),e.compileShader(i),!e.getShaderParameter(i,35713)){const r=e.getShaderInfoLog(i);return o(`${pe(t,r,a)}\nError compiling ${j(e,n)}: ${r}`),e.deleteShader(i),null}return i}function xe(e,t,n){let r,o;if("function"==typeof t&&(n=t,t=void 0),"function"==typeof e)n=e,e=void 0;else if(e&&!Array.isArray(e)){if(e.errorCallback)return e;const t=e;n=t.errorCallback,e=t.attribLocations,r=t.transformFeedbackVaryings,o=t.transformFeedbackMode}const i={errorCallback:n||$,transformFeedbackVaryings:r,transformFeedbackMode:o};if(e){let n={};Array.isArray(e)?e.forEach((function(e,r){n[e]=t?t[r]:r})):n=e,i.attribLocations=n}return i}const ge=["VERTEX_SHADER","FRAGMENT_SHADER"];function Be(e,t){t.forEach((function(t){e.deleteShader(t)}))}function ze(e,t,n,r,o){const i=xe(n,r,o),a=[];for(let n=0;n<t.length;++n){const r=be(e,t[n],e[ge[n]],i.errorCallback);if(!r)return null;a.push(r)}return function(e,t,n,r,o){const i=xe(n,r,o),a=[],c=[];for(let n=0;n<t.length;++n){let r=t[n];if("string"==typeof r){const t=Q(r),o=t?t.text:r;let a=e[ge[n]];t&&t.type&&(a=((s=t.type).indexOf("frag")>=0?35632:s.indexOf("vert")>=0?35633:void 0)||a),r=be(e,o,a,i.errorCallback),c.push(r)}"undefined"!=typeof WebGLShader&&r instanceof WebGLShader&&a.push(r)}var s;if(a.length!==t.length)return i.errorCallback("not enough shaders for program"),Be(e,c),null;const u=e.createProgram();a.forEach((function(t){e.attachShader(u,t)})),i.attribLocations&&Object.keys(i.attribLocations).forEach((function(t){e.bindAttribLocation(u,i.attribLocations[t],t)}));let f=i.transformFeedbackVaryings;if(f&&(f.attribs&&(f=f.attribs),Array.isArray(f)||(f=Object.keys(f)),e.transformFeedbackVaryings(u,f,i.transformFeedbackMode||35981)),e.linkProgram(u),!e.getProgramParameter(u,35714)){const t=e.getProgramInfoLog(u);return i.errorCallback(`${a.map((t=>{const n=pe(e.getShaderSource(t),"",0),r=e.getShaderParameter(t,e.SHADER_TYPE);return`${j(e,r)}\n${n}}`})).join("\n")}\nError in program linking: ${t}`),e.deleteProgram(u),Be(e,c),null}return u}(e,a,i)}function Me(e){const t=e.name;return t.startsWith("gl_")||t.startsWith("webgl_")}function Ee(e,t){let n=0;function r(t,r,o){const i=r.name.endsWith("[0]"),a=r.type,c=ne[a];if(!c)throw new Error(`unknown type: 0x${a.toString(16)}`);let s;if(c.bindPoint){const t=n;n+=r.size,s=i?c.arraySetter(e,a,t,o,r.size):c.setter(e,a,t,o,r.size)}else s=c.arraySetter&&i?c.arraySetter(e,o):c.setter(e,o);return s.location=o,s}const o={},i=e.getProgramParameter(t,35718);for(let n=0;n<i;++n){const i=e.getActiveUniform(t,n);if(Me(i))continue;let a=i.name;a.endsWith("[0]")&&(a=a.substr(0,a.length-3));const c=e.getUniformLocation(t,i.name);c&&(o[a]=r(0,i,c))}return o}function we(e,t){const n=e.uniformSetters||e,r=arguments.length;for(let e=1;e<r;++e){const t=arguments[e];if(Array.isArray(t)){const e=t.length;for(let r=0;r<e;++r)we(n,t[r])}else for(const e in t){const r=n[e];r&&r(t[e])}}}function Te(e,t){const n={},r=e.getProgramParameter(t,35721);for(let o=0;o<r;++o){const r=e.getActiveAttrib(t,o);if(Me(r))continue;const i=e.getAttribLocation(t,r.name),a=me[r.type],c=a.setter(e,i,a);c.location=i,n[r.name]=c}return n}function Ce(e,t){const n={program:t,uniformSetters:Ee(e,t),attribSetters:Te(e,t)};return _(e)&&(n.uniformBlockSpec=function(e,t){const n=e.getProgramParameter(t,35718),r=[],o=[];for(let i=0;i<n;++i){o.push(i),r.push({});const n=e.getActiveUniform(t,i);if(Me(n))break;r[i].name=n.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach((function(n){const i=n[0],a=n[1];e.getActiveUniforms(t,o,e[i]).forEach((function(e,t){r[t][a]=e}))}));const i={},a=e.getProgramParameter(t,35382);for(let n=0;n<a;++n){const r=e.getActiveUniformBlockName(t,n),o={index:e.getUniformBlockIndex(t,r),usedByVertexShader:e.getActiveUniformBlockParameter(t,n,35396),usedByFragmentShader:e.getActiveUniformBlockParameter(t,n,35398),size:e.getActiveUniformBlockParameter(t,n,35392),uniformIndices:e.getActiveUniformBlockParameter(t,n,35395)};o.used=o.usedByVertexShader||o.usedByFragmentShader,i[r]=o}return{blockSpecs:i,uniformData:r}}(e,t),n.transformFeedbackInfo=function(e,t){const n={},r=e.getProgramParameter(t,35971);for(let o=0;o<r;++o){const r=e.getTransformFeedbackVarying(t,o);n[r.name]={index:o,type:r.type,size:r.size}}return n}(e,t)),n}const ke=36096,Pe=33306,Se={};Se[34041]=Pe,Se[6401]=36128,Se[36168]=36128,Se[6402]=ke,Se[33189]=ke,Se[33190]=ke,Se[36012]=ke,Se[35056]=Pe,Se[36013]=Pe;const Ue={};Ue[32854]=!0,Ue[32855]=!0,Ue[36194]=!0,Ue[34041]=!0,Ue[33189]=!0,Ue[6401]=!0,Ue[36168]=!0;var Le,Ie,Ne=function(){function e(){}return e.cross=function(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]},e.normalize=function(t){var n=e.norm(t);return 0===n?[0,0,0]:e.scale(1/n,t)},e.norm=function(t){return Math.sqrt(e.dot(t,t))},e.add=function(e,t){return[e[0]+t[0],e[1]+t[1],e[2]+t[2]]},e.scale=function(e,t){return[t[0]*e,t[1]*e,t[2]*e]},e.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},e}();!function(e){e.NONE="none",e.VELOCITY="velocity",e.MOTION_BLUR="blur",e.PIXELIZE="pixelize",e.GRID_FLOW="grid",e.SQUARE_FLOW="square"}(Le||(Le={})),function(e){e.LOW="low",e.MEDIUM="medium",e.HIGH="high"}(Ie||(Ie={})),function(){function e(){var e=this;this.renderType=Le.NONE,this.quality=Ie.MEDIUM,this.nav=document.querySelector("nav"),document.querySelector("#close").addEventListener("click",(function(){return e.nav.classList.remove("visible")})),document.querySelector("#open").addEventListener("click",(function(){return e.nav.classList.add("visible")})),document.querySelectorAll('input[type="radio"][name="renderType"]').forEach((function(t){t.addEventListener("change",(function(t){return e.handleChangeRenderType(t.target.value)})),t.checked&&e.handleChangeRenderType(t.value)})),document.querySelectorAll('input[type="radio"][name="quality"]').forEach((function(t){t.addEventListener("change",(function(t){return e.handleChangeQuality(t.target.value)})),t.checked&&e.handleChangeQuality(t.value)}))}e.prototype.handleChangeRenderType=function(e){this.renderType=e},e.prototype.handleChangeQuality=function(e){this.quality=e,this.qualityCb&&this.qualityCb(this.quality)},e.prototype.onChangeQuality=function(e){this.qualityCb=e}}();var Fe=n(477),Oe=n(424);function Je(e){var t;return(t={},t[Ie.LOW]=2,t[Ie.MEDIUM]=1.4,t[Ie.HIGH]=1,t)[e]}var Ze=Ie.LOW;function De(e,t){var n=document.querySelector("#c").getContext("webgl");if(function(e,t){t=t||1,t=Math.max(0,t);const n=e.clientWidth*t|0,r=e.clientHeight*t|0;(e.width!==n||e.height!==r)&&(e.width=n,e.height=r)}(n.canvas),n.canvas.width/=Je(Ze),n.canvas.height/=Je(Ze),n.getExtension("OES_texture_float")){n.getExtension("OES_texture_float_linear");var r=function(e,t,n,r,o){const i=xe(n,r,o);let a=!0;if(t=t.map((function(e){if(e.indexOf("\n")<0){const t=Q(e);t?e=t.text:(i.errorCallback("no element with id: "+e),a=!1)}return e})),!a)return null;const c=ze(e,t,i);return c?Ce(e,c):null}(n,[Fe.sourceCode,Oe.sourceCode]),o=E(n,{position:[-1,-1,0,1,-1,0,-1,1,0,-1,1,0,1,-1,0,1,1,0]}),i=[80,20,100],a=[.89407102073112,.4045389411524194,-.19231550894322832],c=[0,0];e.onMouseMove((function(e,t){c=t})),Date.now(),requestAnimationFrame((function t(s){var u,f=s/1e3,l=Ne.normalize(Ne.cross(a,[0,0,1])),v=Ne.cross(a,l),d=c[0],A=c[1];a=Ne.normalize(Ne.add(Ne.add(a,Ne.scale(1*d,l)),Ne.scale(1*A,v)));var m=Ne.normalize(e.moveDirection),y=Ne.add(Ne.add(Ne.scale(m[0],a),Ne.scale(-m[1],l)),Ne.scale(m[2],v));i=Ne.add(i,Ne.scale(1.8,y)),n.viewport(0,0,n.canvas.width,n.canvas.height);var p=((u={})[Oe.uniforms.time.variableName]=f,u[Oe.uniforms.resolution.variableName]=[n.canvas.width,n.canvas.height],u[Oe.uniforms.cameraPosition.variableName]=[i[0],i[1],i[2]],u[Oe.uniforms.cameraDirection.variableName]=[a[0],a[1],a[2]],u);!function(e,t,n,r,o){e.useProgram(t.program),function(e,t,n){n.vertexArrayObject?e.bindVertexArray(n.vertexArrayObject):(function(e,t){for(const n in t){const r=e[n];r&&r(t[n])}}(t.attribSetters||t,n.attribs),n.indices&&e.bindBuffer(34963,n.indices))}(e,t,r),function(e,t,n){n=n||36160,t?(e.bindFramebuffer(n,t.framebuffer),e.viewport(0,0,t.width,t.height)):(e.bindFramebuffer(n,null),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight))}(e,null),we(t,o),function(e,t,n,r,o,i){n=void 0===n?4:n;const a=t.indices,c=t.elementType,s=void 0===r?t.numElements:r;o=void 0===o?0:o,c||a?void 0!==i?e.drawElementsInstanced(n,s,void 0===c?5123:t.elementType,o,i):e.drawElements(n,s,void 0===c?5123:t.elementType,o):void 0!==i?e.drawArraysInstanced(n,o,s,i):e.drawArrays(n,o,s)}(e,r)}(n,r,0,o,p),requestAnimationFrame(t)}))}else console.error("no floating point texture support")}var Ke=function(){function e(){var e=this;this.prevDir=null,this.isLocked=!1,this.moveDirection=[0,0,0],this.canvas=document.querySelector("#c"),this.canvas.requestPointerLock=this.canvas.requestPointerLock||this.canvas.mozRequestPointerLock,document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock,this.canvas.onclick=function(){e.canvas.requestPointerLock()},document.addEventListener("pointerlockchange",(function(){return e.handleLockChange()}),!1),document.addEventListener("mozpointerlockchange",(function(){return e.handleLockChange()}),!1),document.addEventListener("mousemove",(function(t){return e.handleMouseMove(t)}),!1),document.addEventListener("touchmove",(function(t){return e.handleMouseMove(t)}),!1),document.addEventListener("keydown",(function(t){return e.handleKeyboardDown(t)}),!1),document.addEventListener("keyup",(function(t){return e.handleKeyboardUp(t)}),!1)}return e.prototype.handleLockChange=function(){document.pointerLockElement===this.canvas||document.mozPointerLockElement===this.canvas?this.isLocked=!0:this.isLocked=!1},e.prototype.handleMouseMove=function(e){if(this.mouseMoveCb&&this.isLocked){var t=e.movementX/500,n=e.movementY/500;-1===e.movementX&&-1===e.movementY&&(t=0,n=0),this.mouseMoveCb(void 0,[t,n])}},e.prototype.handleKeyboardDown=function(e){switch(e.key){case"z":this.moveDirection[0]=1;break;case"s":this.moveDirection[0]=-1;break;case"q":this.moveDirection[1]=1;break;case"d":this.moveDirection[1]=-1;break;case"a":this.moveDirection[2]=1;break;case"e":this.moveDirection[2]=-1}},e.prototype.handleKeyboardUp=function(e){switch(e.key){case"z":case"s":this.moveDirection[0]=0;break;case"q":case"d":this.moveDirection[1]=0;break;case"a":case"e":this.moveDirection[2]=0}},e.prototype.onMouseMove=function(e){this.mouseMoveCb=e},e.prototype.onCameraMove=function(e){this.cameraMoveCb=e},e}();window.addEventListener("load",(function(){De(new Ke)}))})()})();